{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://learning-platform.github.io/schemas/self-assessment.json",
  "title": "Self-Assessment Schema",
  "description": "Schema for self-assessment tracking files used by coaches and progress system",
  "type": "object",
  "required": ["metadata", "assessment", "timestamp"],
  "properties": {
    "metadata": {
      "type": "object",
      "description": "Metadata about the self-assessment file and its context",
      "required": ["version", "assessmentId", "source", "fileType"],
      "properties": {
        "version": {
          "type": "string",
          "description": "Schema version for compatibility tracking",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "example": "1.0.0"
        },
        "assessmentId": {
          "type": "string",
          "description": "Unique identifier for the self-assessment type",
          "pattern": "^[a-z0-9-]+$",
          "example": "learning-skill-assessment"
        },
        "assessmentTitle": {
          "type": "string",
          "description": "Human-readable title of the assessment",
          "example": "Learning Skill Assessment"
        },
        "assessmentType": {
          "type": "string",
          "description": "Type of assessment for categorization",
          "enum": ["skill-assessment", "competency-evaluation", "progress-review", "self-reflection"],
          "example": "skill-assessment"
        },
        "source": {
          "type": "string",
          "description": "Source of the assessment update to prevent circular updates",
          "enum": ["ui", "coach", "file-watcher", "server", "import", "manual"],
          "example": "coach"
        },
        "fileType": {
          "type": "string",
          "const": "self-assessment",
          "description": "File type identifier for validation"
        },
        "sessionId": {
          "type": "string",
          "description": "Optional session identifier for tracking assessment context",
          "example": "assessment-session-20250110-164310"
        },
        "userId": {
          "type": "string",
          "description": "Optional user identifier for multi-user environments",
          "example": "user123"
        },
        "pageUrl": {
          "type": "string",
          "description": "URL of the assessment page where results were captured",
          "example": "/learning/skill-assessment.md"
        },
        "coachMode": {
          "type": "string",
          "description": "Which coach mode was used for the assessment",
          "enum": ["kata-coach", "lab-coach", "self-directed"],
          "example": "kata-coach"
        },
        "lastUpdated": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of when this assessment file was last updated",
          "example": "2025-01-10T16:43:10.000Z"
        }
      }
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of when this assessment was recorded",
      "example": "2025-01-10T16:43:10.000Z"
    },
    "assessment": {
      "type": "object",
      "description": "Assessment data and responses",
      "required": ["questions", "results"],
      "properties": {
        "questions": {
          "type": "array",
          "description": "Assessment questions and responses",
          "items": {
            "type": "object",
            "required": ["id", "question", "category", "response"],
            "properties": {
              "id": {
                "type": "string",
                "description": "Unique identifier for the question",
                "example": "q1-prompt-ai-integration"
              },
              "question": {
                "type": "string",
                "description": "The assessment question text",
                "example": "How comfortable are you with crafting effective prompts for code generation?"
              },
              "category": {
                "type": "string",
                "description": "Skill category this question belongs to",
                "enum": ["ai-assisted-engineering", "prompt-engineering", "edge-deployment", "system-troubleshooting", "project-planning", "data-analytics"],
                "example": "ai-assisted-engineering"
              },
              "response": {
                "type": "integer",
                "minimum": 1,
                "maximum": 5,
                "description": "Rating response (1-5 scale)",
                "example": 3
              },
              "responseText": {
                "type": "string",
                "description": "Optional text description of the rating",
                "example": "Competent - I regularly use AI assistance and write effective prompts"
              },
              "timestamp": {
                "type": "string",
                "format": "date-time",
                "description": "When this question was answered",
                "example": "2025-01-10T16:35:00.000Z"
              }
            }
          }
        },
        "results": {
          "type": "object",
          "description": "Calculated assessment results and scores",
          "required": ["categoryScores", "overallScore"],
          "properties": {
            "categoryScores": {
              "type": "object",
              "description": "Scores by skill category",
              "required": ["ai-assisted-engineering", "prompt-engineering", "edge-deployment", "system-troubleshooting", "project-planning", "data-analytics"],
              "properties": {
                "ai-assisted-engineering": {
                  "type": "object",
                  "required": ["score", "level", "questionsCount"],
                  "properties": {
                    "score": {
                      "type": "number",
                      "minimum": 1,
                      "maximum": 5,
                      "description": "Average score for this category",
                      "example": 3.33
                    },
                    "level": {
                      "type": "string",
                      "enum": ["beginner", "intermediate", "advanced", "expert"],
                      "description": "Skill level based on score",
                      "example": "intermediate"
                    },
                    "questionsCount": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Number of questions in this category",
                      "example": 3
                    },
                    "totalPoints": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Total points earned in this category",
                      "example": 10
                    },
                    "maxPoints": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Maximum possible points in this category",
                      "example": 15
                    }
                  }
                },
                "prompt-engineering": {
                  "type": "object",
                  "required": ["score", "level", "questionsCount"],
                  "properties": {
                    "score": {
                      "type": "number",
                      "minimum": 1,
                      "maximum": 5,
                      "description": "Average score for this category"
                    },
                    "level": {
                      "type": "string",
                      "enum": ["beginner", "intermediate", "advanced", "expert"],
                      "description": "Skill level based on score"
                    },
                    "questionsCount": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Number of questions in this category"
                    },
                    "totalPoints": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Total points earned in this category"
                    },
                    "maxPoints": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Maximum possible points in this category"
                    }
                  }
                },
                "edge-deployment": {
                  "type": "object",
                  "required": ["score", "level", "questionsCount"],
                  "properties": {
                    "score": {
                      "type": "number",
                      "minimum": 1,
                      "maximum": 5,
                      "description": "Average score for this category"
                    },
                    "level": {
                      "type": "string",
                      "enum": ["beginner", "intermediate", "advanced", "expert"],
                      "description": "Skill level based on score"
                    },
                    "questionsCount": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Number of questions in this category"
                    },
                    "totalPoints": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Total points earned in this category"
                    },
                    "maxPoints": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Maximum possible points in this category"
                    }
                  }
                },
                "system-troubleshooting": {
                  "type": "object",
                  "required": ["score", "level", "questionsCount"],
                  "properties": {
                    "score": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 5,
                      "description": "Average score for this category"
                    },
                    "level": {
                      "type": "string",
                      "enum": ["beginner", "intermediate", "advanced", "expert"],
                      "description": "Skill level based on score"
                    },
                    "questionsCount": {
                      "type": "integer",
                      "minimum": 0,
                      "description": "Number of questions in this category"
                    },
                    "totalPoints": {
                      "type": "integer",
                      "minimum": 0,
                      "description": "Total points earned in this category"
                    },
                    "maxPoints": {
                      "type": "integer",
                      "minimum": 0,
                      "description": "Maximum possible points in this category"
                    }
                  }
                },
                "project-planning": {
                  "type": "object",
                  "required": ["score", "level", "questionsCount"],
                  "properties": {
                    "score": {
                      "type": "number",
                      "minimum": 1,
                      "maximum": 5,
                      "description": "Average score for this category"
                    },
                    "level": {
                      "type": "string",
                      "enum": ["beginner", "intermediate", "advanced", "expert"],
                      "description": "Skill level based on score"
                    },
                    "questionsCount": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Number of questions in this category"
                    },
                    "totalPoints": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Total points earned in this category"
                    },
                    "maxPoints": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Maximum possible points in this category"
                    }
                  }
                },
                "data-analytics": {
                  "type": "object",
                  "required": ["score", "level", "questionsCount"],
                  "properties": {
                    "score": {
                      "type": "number",
                      "minimum": 1,
                      "maximum": 5,
                      "description": "Average score for this category"
                    },
                    "level": {
                      "type": "string",
                      "enum": ["beginner", "intermediate", "advanced", "expert"],
                      "description": "Skill level based on score"
                    },
                    "questionsCount": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Number of questions in this category"
                    },
                    "totalPoints": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Total points earned in this category"
                    },
                    "maxPoints": {
                      "type": "integer",
                      "minimum": 1,
                      "description": "Maximum possible points in this category"
                    }
                  }
                }
              }
            },
            "overallScore": {
              "type": "number",
              "minimum": 1,
              "maximum": 5,
              "description": "Overall average score across all categories",
              "example": 3.2
            },
            "overallLevel": {
              "type": "string",
              "enum": ["beginner", "intermediate", "advanced", "expert"],
              "description": "Overall skill level based on overall score",
              "example": "intermediate"
            },
            "strengthCategories": {
              "type": "array",
              "description": "Categories where the user scored highest",
              "items": {
                "type": "string",
                "enum": ["ai-assisted-engineering", "prompt-engineering", "edge-deployment", "system-troubleshooting", "project-planning", "data-analytics"]
              },
              "example": ["ai-assisted-engineering"]
            },
            "growthCategories": {
              "type": "array",
              "description": "Categories with the most room for improvement",
              "items": {
                "type": "string",
                "enum": ["ai-assisted-engineering", "prompt-engineering", "edge-deployment", "system-troubleshooting", "project-planning", "data-analytics"]
              },
              "example": ["edge-deployment", "system-troubleshooting"]
            },
            "recommendedPath": {
              "type": "string",
              "enum": ["beginner", "intermediate", "advanced", "expert"],
              "description": "Recommended learning path based on assessment",
              "example": "intermediate"
            }
          }
        },
        "completionData": {
          "type": "object",
          "description": "Assessment completion tracking",
          "properties": {
            "isComplete": {
              "type": "boolean",
              "description": "Whether the assessment is fully complete",
              "example": true
            },
            "completedAt": {
              "type": "string",
              "format": "date-time",
              "description": "When the assessment was completed",
              "example": "2025-01-10T16:45:00.000Z"
            },
            "duration": {
              "type": "integer",
              "minimum": 0,
              "description": "Time spent completing assessment in minutes",
              "example": 12
            },
            "questionsAnswered": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of questions answered",
              "example": 12
            },
            "totalQuestions": {
              "type": "integer",
              "minimum": 0,
              "description": "Total number of questions in assessment",
              "example": 12
            }
          }
        }
      }
    },
    "coaching": {
      "type": "object",
      "description": "Coaching interaction data related to the assessment",
      "properties": {
        "coachingNotes": {
          "type": "array",
          "description": "Notes from coaching interactions during assessment",
          "items": {
            "type": "object",
            "properties": {
              "timestamp": {
                "type": "string",
                "format": "date-time",
                "description": "When the coaching note was made"
              },
              "note": {
                "type": "string",
                "description": "Coach observation or guidance note"
              },
              "type": {
                "type": "string",
                "enum": ["guidance", "encouragement", "clarification", "recommendation"],
                "description": "Type of coaching interaction"
              },
              "category": {
                "type": "string",
                "enum": ["ai-assisted-engineering", "prompt-engineering", "edge-deployment", "system-troubleshooting", "project-planning", "data-analytics", "general"],
                "description": "Which skill category the note relates to"
              }
            }
          }
        },
        "recommendations": {
          "type": "array",
          "description": "Specific recommendations provided by coach",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": ["kata-recommendation", "learning-path", "skill-focus", "resource-suggestion"],
                "description": "Type of recommendation"
              },
              "content": {
                "type": "string",
                "description": "The recommendation content"
              },
              "category": {
                "type": "string",
                "enum": ["ai-assisted-engineering", "prompt-engineering", "edge-deployment", "system-troubleshooting", "project-planning", "data-analytics", "general"],
                "description": "Which skill category the recommendation relates to"
              },
              "priority": {
                "type": "string",
                "enum": ["high", "medium", "low"],
                "description": "Priority level for this recommendation"
              }
            }
          }
        },
        "nextSteps": {
          "type": "array",
          "description": "Immediate next steps suggested by coach",
          "items": {
            "type": "string"
          },
          "example": ["Start with AI Development Fundamentals kata", "Practice daily AI interactions", "Join AI-assisted development communities"]
        }
      }
    },
    "integrationData": {
      "type": "object",
      "description": "Data for integration with other systems",
      "properties": {
        "exportFormat": {
          "type": "object",
          "description": "Standardized export format for system integration",
          "properties": {
            "learnerProfile": {
              "type": "object",
              "description": "Learner profile data for integration",
              "properties": {
                "assessmentCompleted": {
                  "type": "string",
                  "description": "Assessment identifier"
                },
                "completionDate": {
                  "type": "string",
                  "format": "date-time",
                  "description": "When assessment was completed"
                },
                "overallLevel": {
                  "type": "string",
                  "enum": ["beginner", "intermediate", "advanced", "expert"],
                  "description": "Overall skill level"
                },
                "strengthAreas": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Areas of strength"
                },
                "growthAreas": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Areas for growth"
                }
              }
            },
            "copilotExport": {
              "type": "object",
              "description": "Export data formatted for GitHub Copilot integration",
              "properties": {
                "learner_profile": {
                  "type": "object",
                  "description": "Learner profile for Copilot context"
                },
                "skill_assessment": {
                  "type": "object",
                  "description": "Assessment results for Copilot context"
                },
                "recommendations": {
                  "type": "array",
                  "description": "Personalized recommendations for Copilot"
                }
              }
            }
          }
        },
        "syncMetadata": {
          "type": "object",
          "description": "Metadata for file synchronization",
          "properties": {
            "lastSync": {
              "type": "string",
              "format": "date-time",
              "description": "When file was last synchronized"
            },
            "syncSource": {
              "type": "string",
              "description": "Source of the last sync operation"
            },
            "conflicts": {
              "type": "array",
              "description": "Any sync conflicts that occurred",
              "items": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "environment": {
      "type": "object",
      "description": "Environment and context information",
      "properties": {
        "browser": {
          "type": "string",
          "description": "Browser information if available",
          "example": "Chrome 91.0"
        },
        "assessmentInterface": {
          "type": "string",
          "enum": ["docsify-web", "coach-interactive", "markdown-direct", "api-integration"],
          "description": "How the assessment was administered",
          "example": "coach-interactive"
        },
        "progressSystemVersion": {
          "type": "string",
          "description": "Version of progress tracking system",
          "example": "2.0.0"
        },
        "localServer": {
          "type": "boolean",
          "description": "Whether using local docs server",
          "example": true
        }
      }
    },
    "history": {
      "type": "array",
      "description": "History of assessment updates for audit trail",
      "items": {
        "type": "object",
        "properties": {
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "When the update occurred"
          },
          "source": {
            "type": "string",
            "enum": ["ui", "coach", "file-watcher", "server", "import", "manual"],
            "description": "Source of the update"
          },
          "action": {
            "type": "string",
            "enum": ["created", "updated", "question-answered", "completed", "coached", "exported"],
            "description": "Type of action performed"
          },
          "changes": {
            "type": "object",
            "description": "Summary of what changed"
          }
        }
      }
    }
  },
  "additionalProperties": false
}
