{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://learning-platform.github.io/schemas/learning-path-save-request.json",
  "title": "Learning Path Save Request Schema",
  "description": "Schema for API requests to save learning paths from assessments",
  "type": "object",
  "required": ["assessmentResults"],
  "properties": {
    "userId": {
      "type": "string",
      "description": "User identifier for the learning path",
      "pattern": "^[a-zA-Z0-9_-]+$",
      "minLength": 1,
      "maxLength": 100,
      "default": "default-user"
    },
    "pathType": {
      "type": "string",
      "description": "Type of learning path being saved",
      "enum": ["assessment-recommended", "custom", "coach-guided", "skill-based"],
      "default": "assessment-recommended"
    },
    "assessmentResults": {
      "type": "object",
      "description": "Results from the skill assessment that generated this learning path",
      "required": ["skillLevel", "score", "responses"],
      "properties": {
        "skillLevel": {
          "type": "string",
          "description": "Overall skill level determined by assessment",
          "enum": ["Foundation Builder", "Skill Developer", "Expert Practitioner"]
        },
        "score": {
          "type": "number",
          "description": "Overall assessment score",
          "minimum": 0,
          "maximum": 100
        },
        "totalQuestions": {
          "type": "integer",
          "description": "Total number of questions in the assessment",
          "minimum": 1
        },
        "responses": {
          "type": "array",
          "description": "Category-wise assessment responses",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["category", "score", "total"],
            "properties": {
              "category": {
                "type": "string",
                "description": "Assessment category name - must match the official skill assessment categories",
                "enum": [
                  "AI-Assisted Engineering",
                  "Prompt Engineering",
                  "Edge Deployment",
                  "System Troubleshooting",
                  "Project Planning"
                ]
              },
              "score": {
                "type": "number",
                "description": "Score achieved in this category",
                "minimum": 0
              },
              "total": {
                "type": "number",
                "description": "Total possible score for this category",
                "minimum": 1
              },
              "percentage": {
                "type": "number",
                "description": "Percentage score for this category",
                "minimum": 0,
                "maximum": 100
              }
            }
          }
        },
        "strengths": {
          "type": "array",
          "description": "Areas where the user scored well",
          "items": {
            "type": "string"
          }
        },
        "growthAreas": {
          "type": "array",
          "description": "Areas where the user needs improvement",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "recommendations": {
      "type": "object",
      "description": "Coaching recommendations based on assessment results",
      "properties": {
        "chatmodeRecommendation": {
          "type": "string",
          "description": "Specific guidance for using the learning coach chatmode",
          "minLength": 10,
          "maxLength": 500
        },
        "learningPath": {
          "type": "string",
          "description": "Recommended learning path identifier",
          "pattern": "^[a-z0-9-]+$"
        },
        "focusAreas": {
          "type": "array",
          "description": "Specific areas to focus on",
          "items": {
            "type": "string"
          }
        },
        "nextSteps": {
          "type": "array",
          "description": "Immediate next steps for the learner",
          "items": {
            "type": "string"
          }
        },
        "estimatedDuration": {
          "type": "object",
          "description": "Estimated time to complete the recommended path",
          "properties": {
            "weeks": {
              "type": "integer",
              "minimum": 1,
              "maximum": 52
            },
            "hoursPerWeek": {
              "type": "integer",
              "minimum": 1,
              "maximum": 40
            },
            "totalHours": {
              "type": "integer",
              "minimum": 1
            }
          }
        }
      }
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of when the assessment was completed"
    },
    "metadata": {
      "type": "object",
      "description": "Additional metadata about the assessment and context",
      "properties": {
        "assessmentVersion": {
          "type": "string",
          "description": "Version of the assessment that generated these results"
        },
        "sourceUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL where the assessment was taken"
        },
        "userAgent": {
          "type": "string",
          "description": "Browser user agent string"
        },
        "sessionId": {
          "type": "string",
          "description": "Session identifier for tracking"
        }
      }
    }
  },
  "additionalProperties": false
}
