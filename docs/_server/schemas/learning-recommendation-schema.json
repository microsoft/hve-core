{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://learning-platform.github.io/schemas/learning-recommendation.json",
  "title": "Learning Recommendation Schema",
  "description": "Schema for learning recommendations generated by coaches or assessment systems",
  "type": "object",
  "required": ["metadata", "recommendation", "timestamp"],
  "properties": {
    "metadata": {
      "type": "object",
      "description": "Metadata about the recommendation file and its context",
      "required": ["version", "recommendationId", "source", "fileType"],
      "properties": {
        "version": {
          "type": "string",
          "description": "Schema version for compatibility tracking",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "example": "1.0.0"
        },
        "recommendationId": {
          "type": "string",
          "description": "Unique identifier for this recommendation",
          "pattern": "^[a-z0-9-]+$",
          "example": "learning-recommendation-20250716-164310"
        },
        "source": {
          "type": "string",
          "description": "Source of the recommendation",
          "enum": ["ui", "coach", "assessment", "server", "analytics", "manual"],
          "example": "coach"
        },
        "fileType": {
          "type": "string",
          "const": "learning-recommendation",
          "description": "File type identifier for validation"
        },
        "basedOnAssessment": {
          "type": "string",
          "description": "Assessment ID this recommendation is based on",
          "example": "learning-skill-assessment-20250716-164310"
        },
        "basedOnProgress": {
          "type": "string",
          "description": "Learning path progress ID this recommendation is based on",
          "example": "foundation-builder-ai-engineering-20250716"
        },
        "targetUser": {
          "type": "string",
          "description": "User ID this recommendation is for",
          "example": "user123"
        },
        "sessionId": {
          "type": "string",
          "description": "Session identifier for tracking",
          "example": "recommendation-session-20250716-164310"
        },
        "coachMode": {
          "type": "string",
          "description": "Coach mode that generated this recommendation",
          "enum": ["kata-coach", "lab-coach", "assessment-coach", "path-coach", "analytics-engine"],
          "example": "assessment-coach"
        },
        "generatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "When this recommendation was generated",
          "example": "2025-07-16T16:43:10.000Z"
        },
        "validUntil": {
          "type": "string",
          "format": "date-time",
          "description": "When this recommendation expires",
          "example": "2025-08-16T16:43:10.000Z"
        }
      }
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of when this recommendation was created",
      "example": "2025-07-16T16:43:10.000Z"
    },
    "recommendation": {
      "type": "object",
      "description": "The learning recommendation content",
      "required": ["type", "title", "description", "priority"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["learning-path", "skill-focus", "item-suggestion", "prerequisite-gap", "next-step", "review-recommendation", "skill-branch", "career-alignment"],
          "description": "Type of recommendation"
        },
        "title": {
          "type": "string",
          "description": "Title of the recommendation",
          "example": "Foundation Builder Path - AI Engineering Focus"
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the recommendation",
          "example": "Based on your assessment, this path will build foundational AI engineering skills while addressing prompt engineering gaps."
        },
        "priority": {
          "type": "string",
          "enum": ["high", "medium", "low"],
          "description": "Priority level of this recommendation",
          "example": "high"
        },
        "rationale": {
          "type": "string",
          "description": "Reasoning behind this recommendation",
          "example": "Your scores indicate strong technical skills but opportunity for growth in AI-specific areas."
        },
        "targetSkills": {
          "type": "array",
          "description": "Skills this recommendation targets",
          "items": {
            "type": "string",
            "enum": ["ai-assisted-engineering", "prompt-engineering", "edge-deployment", "system-troubleshooting", "task-planning", "adr-creation"]
          },
          "example": ["ai-assisted-engineering", "prompt-engineering"]
        },
        "learningPath": {
          "type": "object",
          "description": "Learning path details if type is 'learning-path'",
          "properties": {
            "pathId": {
              "type": "string",
              "description": "Suggested learning path ID",
              "example": "foundation-builder-ai-engineering"
            },
            "pathTitle": {
              "type": "string",
              "description": "Learning path title",
              "example": "Foundation Builder - AI Engineering"
            },
            "pathType": {
              "type": "string",
              "enum": ["beginner", "intermediate", "advanced", "expert", "custom", "assessment-generated"],
              "description": "Type of learning path"
            },
            "estimatedDuration": {
              "type": "object",
              "description": "Estimated time to complete",
              "properties": {
                "hours": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "Estimated hours"
                },
                "weeks": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "Estimated weeks"
                },
                "text": {
                  "type": "string",
                  "description": "Human-readable duration",
                  "example": "2-3 weeks of regular practice"
                }
              }
            },
            "difficultyLevel": {
              "type": "string",
              "enum": ["beginner", "intermediate", "advanced", "mixed"],
              "description": "Difficulty level"
            },
            "items": {
              "type": "array",
              "description": "Recommended learning items",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "description": "Learning item ID"
                  },
                  "type": {
                    "type": "string",
                    "enum": ["kata", "lab", "assessment", "resource", "checkpoint"],
                    "description": "Type of learning item"
                  },
                  "title": {
                    "type": "string",
                    "description": "Item title"
                  },
                  "category": {
                    "type": "string",
                    "description": "Skill category"
                  },
                  "priority": {
                    "type": "string",
                    "enum": ["high", "medium", "low"],
                    "description": "Priority within the path"
                  },
                  "reasoning": {
                    "type": "string",
                    "description": "Why this item is recommended"
                  },
                  "prerequisitesAddress": {
                    "type": "array",
                    "description": "Gaps this item addresses",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "customizations": {
              "type": "object",
              "description": "Customizations for the learner",
              "properties": {
                "skipItems": {
                  "type": "array",
                  "description": "Items to skip due to existing knowledge",
                  "items": {
                    "type": "string"
                  }
                },
                "emphasizeItems": {
                  "type": "array",
                  "description": "Items to emphasize for this learner",
                  "items": {
                    "type": "string"
                  }
                },
                "additionalResources": {
                  "type": "array",
                  "description": "Additional resources recommended",
                  "items": {
                    "type": "object",
                    "properties": {
                      "title": {
                        "type": "string",
                        "description": "Resource title"
                      },
                      "url": {
                        "type": "string",
                        "description": "Resource URL"
                      },
                      "type": {
                        "type": "string",
                        "enum": ["documentation", "tutorial", "video", "book", "tool", "practice"],
                        "description": "Type of resource"
                      },
                      "rationale": {
                        "type": "string",
                        "description": "Why this resource is recommended"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "specificItems": {
          "type": "array",
          "description": "Specific learning items recommended (if type is 'item-suggestion')",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "Learning item ID"
              },
              "type": {
                "type": "string",
                "enum": ["kata", "lab", "assessment", "resource"],
                "description": "Type of learning item"
              },
              "title": {
                "type": "string",
                "description": "Item title"
              },
              "category": {
                "type": "string",
                "description": "Skill category"
              },
              "url": {
                "type": "string",
                "description": "URL to the item"
              },
              "estimatedTime": {
                "type": "integer",
                "minimum": 0,
                "description": "Estimated time in minutes"
              },
              "difficulty": {
                "type": "string",
                "enum": ["beginner", "intermediate", "advanced", "expert"],
                "description": "Difficulty level"
              },
              "reasoning": {
                "type": "string",
                "description": "Why this item is recommended"
              },
              "prerequisiteFor": {
                "type": "array",
                "description": "What this item prepares the learner for",
                "items": {
                  "type": "string"
                }
              }
            }
          }
        },
        "skillFocus": {
          "type": "object",
          "description": "Skill focus recommendation (if type is 'skill-focus')",
          "properties": {
            "primarySkill": {
              "type": "string",
              "enum": ["ai-assisted-engineering", "prompt-engineering", "edge-deployment", "system-troubleshooting", "task-planning", "adr-creation"],
              "description": "Primary skill to focus on"
            },
            "currentLevel": {
              "type": "string",
              "enum": ["beginner", "intermediate", "advanced", "expert"],
              "description": "Current level in this skill"
            },
            "targetLevel": {
              "type": "string",
              "enum": ["beginner", "intermediate", "advanced", "expert"],
              "description": "Target level to achieve"
            },
            "gapAnalysis": {
              "type": "array",
              "description": "Specific gaps to address",
              "items": {
                "type": "string"
              }
            },
            "recommendedActivities": {
              "type": "array",
              "description": "Activities to develop this skill",
              "items": {
                "type": "object",
                "properties": {
                  "activity": {
                    "type": "string",
                    "description": "Activity description"
                  },
                  "type": {
                    "type": "string",
                    "enum": ["kata", "lab", "practice", "reading", "project"],
                    "description": "Type of activity"
                  },
                  "priority": {
                    "type": "string",
                    "enum": ["high", "medium", "low"],
                    "description": "Priority level"
                  }
                }
              }
            }
          }
        },
        "prerequisites": {
          "type": "object",
          "description": "Prerequisites recommendation (if type is 'prerequisite-gap')",
          "properties": {
            "missingPrerequisites": {
              "type": "array",
              "description": "Prerequisites that need to be addressed",
              "items": {
                "type": "string"
              }
            },
            "recommendedPrerequisiteItems": {
              "type": "array",
              "description": "Items to complete prerequisites",
              "items": {
                "type": "string"
              }
            },
            "blockedItems": {
              "type": "array",
              "description": "Items blocked by missing prerequisites",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "nextSteps": {
          "type": "object",
          "description": "Next steps recommendation (if type is 'next-step')",
          "properties": {
            "immediateActions": {
              "type": "array",
              "description": "Actions to take immediately",
              "items": {
                "type": "string"
              }
            },
            "shortTermGoals": {
              "type": "array",
              "description": "Goals for the next 1-2 weeks",
              "items": {
                "type": "string"
              }
            },
            "longTermGoals": {
              "type": "array",
              "description": "Goals for the next 1-3 months",
              "items": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "context": {
      "type": "object",
      "description": "Context that influenced this recommendation",
      "properties": {
        "assessmentScores": {
          "type": "object",
          "description": "Assessment scores that influenced this recommendation",
          "properties": {
            "overallScore": {
              "type": "number",
              "minimum": 1,
              "maximum": 5,
              "description": "Overall assessment score"
            },
            "categoryScores": {
              "type": "object",
              "description": "Scores by category",
              "patternProperties": {
                "^[a-z-]+$": {
                  "type": "number",
                  "minimum": 1,
                  "maximum": 5
                }
              }
            },
            "strengthCategories": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Categories where user scored highest"
            },
            "growthCategories": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Categories with most growth potential"
            }
          }
        },
        "progressHistory": {
          "type": "object",
          "description": "Progress history that influenced this recommendation",
          "properties": {
            "completedItems": {
              "type": "array",
              "description": "Recently completed learning items",
              "items": {
                "type": "string"
              }
            },
            "strugglingAreas": {
              "type": "array",
              "description": "Areas where progress has been slow",
              "items": {
                "type": "string"
              }
            },
            "learningVelocity": {
              "type": "string",
              "enum": ["fast", "moderate", "slow"],
              "description": "Current learning velocity"
            },
            "engagementLevel": {
              "type": "string",
              "enum": ["high", "medium", "low"],
              "description": "Current engagement level"
            }
          }
        },
        "personalizedFactors": {
          "type": "object",
          "description": "Personalization factors",
          "properties": {
            "role": {
              "type": "string",
              "description": "Professional role"
            },
            "experienceLevel": {
              "type": "string",
              "enum": ["beginner", "intermediate", "advanced", "expert"],
              "description": "Overall experience level"
            },
            "timeAvailability": {
              "type": "string",
              "enum": ["minimal", "moderate", "extensive"],
              "description": "Available time for learning"
            },
            "learningPreferences": {
              "type": "array",
              "description": "Preferred learning methods",
              "items": {
                "type": "string",
                "enum": ["hands-on", "theoretical", "guided", "self-directed", "collaborative"]
              }
            },
            "careerGoals": {
              "type": "array",
              "description": "Career goals",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "environmentalFactors": {
          "type": "object",
          "description": "Environmental factors",
          "properties": {
            "availableTools": {
              "type": "array",
              "description": "Tools available to the learner",
              "items": {
                "type": "string"
              }
            },
            "teamContext": {
              "type": "string",
              "description": "Team or organizational context"
            },
            "urgency": {
              "type": "string",
              "enum": ["low", "medium", "high"],
              "description": "Urgency of skill development"
            },
            "supportLevel": {
              "type": "string",
              "enum": ["minimal", "moderate", "extensive"],
              "description": "Available support for learning"
            }
          }
        }
      }
    },
    "implementation": {
      "type": "object",
      "description": "Implementation details for this recommendation",
      "properties": {
        "actionItems": {
          "type": "array",
          "description": "Specific actions to implement this recommendation",
          "items": {
            "type": "object",
            "properties": {
              "action": {
                "type": "string",
                "description": "Action to take"
              },
              "priority": {
                "type": "string",
                "enum": ["high", "medium", "low"],
                "description": "Priority level"
              },
              "estimatedTime": {
                "type": "integer",
                "minimum": 0,
                "description": "Estimated time in minutes"
              },
              "dependencies": {
                "type": "array",
                "description": "Dependencies for this action",
                "items": {
                  "type": "string"
                }
              },
              "resources": {
                "type": "array",
                "description": "Resources needed",
                "items": {
                  "type": "string"
                }
              }
            }
          }
        },
        "timeline": {
          "type": "object",
          "description": "Suggested timeline for implementation",
          "properties": {
            "startDate": {
              "type": "string",
              "format": "date",
              "description": "Suggested start date"
            },
            "milestones": {
              "type": "array",
              "description": "Key milestones",
              "items": {
                "type": "object",
                "properties": {
                  "date": {
                    "type": "string",
                    "format": "date",
                    "description": "Milestone date"
                  },
                  "description": {
                    "type": "string",
                    "description": "Milestone description"
                  },
                  "success_criteria": {
                    "type": "array",
                    "description": "Success criteria for this milestone",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "totalDuration": {
              "type": "string",
              "description": "Total estimated duration",
              "example": "2-3 weeks"
            }
          }
        },
        "successMetrics": {
          "type": "array",
          "description": "Metrics to measure success",
          "items": {
            "type": "object",
            "properties": {
              "metric": {
                "type": "string",
                "description": "Metric name"
              },
              "target": {
                "type": "string",
                "description": "Target value"
              },
              "measurement": {
                "type": "string",
                "description": "How to measure"
              }
            }
          }
        },
        "riskFactors": {
          "type": "array",
          "description": "Potential risks to implementation",
          "items": {
            "type": "object",
            "properties": {
              "risk": {
                "type": "string",
                "description": "Risk description"
              },
              "probability": {
                "type": "string",
                "enum": ["low", "medium", "high"],
                "description": "Risk probability"
              },
              "impact": {
                "type": "string",
                "enum": ["low", "medium", "high"],
                "description": "Risk impact"
              },
              "mitigation": {
                "type": "string",
                "description": "Mitigation strategy"
              }
            }
          }
        }
      }
    },
    "coaching": {
      "type": "object",
      "description": "Coaching guidance for this recommendation",
      "properties": {
        "coachingStyle": {
          "type": "string",
          "enum": ["supportive", "challenging", "directive", "collaborative", "adaptive"],
          "description": "Recommended coaching style"
        },
        "coachingNotes": {
          "type": "array",
          "description": "Notes for coaches",
          "items": {
            "type": "string"
          }
        },
        "interventionTriggers": {
          "type": "array",
          "description": "Triggers for coach intervention",
          "items": {
            "type": "object",
            "properties": {
              "trigger": {
                "type": "string",
                "description": "Trigger condition"
              },
              "action": {
                "type": "string",
                "description": "Recommended action"
              },
              "urgency": {
                "type": "string",
                "enum": ["low", "medium", "high"],
                "description": "Urgency level"
              }
            }
          }
        },
        "supportStrategies": {
          "type": "array",
          "description": "Support strategies for this recommendation",
          "items": {
            "type": "object",
            "properties": {
              "strategy": {
                "type": "string",
                "description": "Support strategy"
              },
              "applicablePhases": {
                "type": "array",
                "description": "When to apply this strategy",
                "items": {
                  "type": "string",
                  "enum": ["planning", "early-implementation", "mid-implementation", "completion", "reflection"]
                }
              }
            }
          }
        }
      }
    },
    "feedback": {
      "type": "object",
      "description": "Feedback mechanisms for this recommendation",
      "properties": {
        "feedbackRequests": {
          "type": "array",
          "description": "Feedback requests for the learner",
          "items": {
            "type": "object",
            "properties": {
              "question": {
                "type": "string",
                "description": "Feedback question"
              },
              "type": {
                "type": "string",
                "enum": ["rating", "text", "choice", "ranking"],
                "description": "Type of feedback"
              },
              "timing": {
                "type": "string",
                "enum": ["immediate", "weekly", "completion", "milestone"],
                "description": "When to request feedback"
              },
              "purpose": {
                "type": "string",
                "description": "Purpose of this feedback"
              }
            }
          }
        },
        "adaptationTriggers": {
          "type": "array",
          "description": "Triggers for adapting the recommendation",
          "items": {
            "type": "object",
            "properties": {
              "condition": {
                "type": "string",
                "description": "Condition that triggers adaptation"
              },
              "adaptation": {
                "type": "string",
                "description": "How to adapt"
              },
              "threshold": {
                "type": "string",
                "description": "Threshold for triggering"
              }
            }
          }
        }
      }
    },
    "version": {
      "type": "object",
      "description": "Version information for this recommendation",
      "properties": {
        "recommendationVersion": {
          "type": "string",
          "description": "Version of this recommendation",
          "example": "1.0.0"
        },
        "baselineAssessment": {
          "type": "string",
          "description": "Assessment version this is based on",
          "example": "1.2.0"
        },
        "algorithmVersion": {
          "type": "string",
          "description": "Recommendation algorithm version",
          "example": "2.1.0"
        },
        "dataVersion": {
          "type": "string",
          "description": "Learning content data version",
          "example": "3.0.1"
        }
      }
    }
  },
  "additionalProperties": false
}
