{
  "name": "HVE Core - Markdown Editing",
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu",
  // Rename the mount to /workspace for consistency, otherwise its mounted using
  // whatever folder name the user cloned the repo as
  "workspaceMount": "\"source=${localWorkspaceFolder}\",target=/workspace,type=bind",
  "workspaceFolder": "/workspace",
  "mounts": [
    // Put GitHub local user data in a volume
    {
      "type": "volume",
      "source": "${devcontainerId}-userconfig",
      "target": "/home/vscode/.config"
    },
    // Put node modules into volume for better performance
    {
      "type": "volume",
      "source": "${devcontainerId}-nodemodules",
      "target": "/workspace/node_modules"
    }
  ],
  "containerEnv": {
    "REQUESTS_CA_BUNDLE": "/etc/ssl/certs/ca-certificates.crt", // for pip
    "NODE_EXTRA_CA_CERTS": "/etc/ssl/certs/ca-certificates.crt", // for nodejs
    "SSL_CERT_FILE": "/etc/ssl/certs/ca-certificates.crt" // for uv (else use --native-tls flag)
  },
  "features": {
    "ghcr.io/devcontainers/features/node:1": {
      "version": "lts"
    },
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/devcontainers/features/powershell:1": {}
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "streetsidesoftware.code-spell-checker",
        "davidanson.vscode-markdownlint",
        "yzhang.markdown-all-in-one",
        "bierner.markdown-preview-github-styles",
        "bierner.markdown-mermaid",
        "bpruitt-goddard.mermaid-markdown-syntax-highlighting",
        "github.vscode-pull-request-github"
      ],
      "settings": {
        // Prevent extensions from stealing focus, see microsoft/vscode#205225
        "workbench.view.showQuietly": {
          "workbench.panel.output": true
        },
      }
    }
  },
  // This is to ensure support for config includes is properly handled, see microsoft/vscode-remote-release/2084
  "initializeCommand": {
    "extractGitGlobals": "(git config -l --global --include || true) > .gitconfig.global",
    "extractGitLocals": "(git config -l --local --include || true) > .gitconfig.local"
  },
  "postAttachCommand": "/bin/bash .devcontainer/scripts/post-attach.sh",
  "onCreateCommand": "bash .devcontainer/scripts/on-create.sh",
  "postCreateCommand": "bash .devcontainer/scripts/post-create.sh",
  "remoteUser": "vscode"
}
