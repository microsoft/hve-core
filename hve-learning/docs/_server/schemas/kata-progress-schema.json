{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://learning-platform.github.io/schemas/kata-progress.json",
  "title": "Kata Progress Schema",
  "description": "Schema for kata progress tracking files used by coaches and progress system",
  "type": "object",
  "required": ["metadata", "progress", "timestamp"],
  "properties": {
    "metadata": {
      "type": "object",
      "description": "Metadata about the progress file and its context",
      "required": ["version", "kataId", "source", "fileType"],
      "properties": {
        "version": {
          "type": "string",
          "description": "Schema version for compatibility tracking",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "example": "1.0.0"
        },
        "kataId": {
          "type": "string",
          "description": "Unique identifier for the kata (category-kata-name format)",
          "pattern": "^[a-z0-9-]+$",
          "example": "ai-assisted-engineering-01-ai-development-fundamentals"
        },
        "kataTitle": {
          "type": "string",
          "description": "Human-readable title of the kata",
          "example": "AI Development Fundamentals"
        },
        "category": {
          "type": "string",
          "description": "Kata category for grouping and filtering",
          "enum": ["adr-creation", "ai-assisted-engineering", "edge-deployment", "fabric-integration", "project-planning", "prompt-engineering", "task-planning", "troubleshooting", "cross-platform-integration"],
          "example": "ai-assisted-engineering"
        },
        "pathAlignment": {
          "type": "array",
          "description": "Learning path alignment for this kata",
          "items": {
            "type": "string",
            "enum": ["foundation-ai-first-engineering", "intermediate-infrastructure-architect", "intermediate-devops-excellence", "expert-enterprise-integration", "expert-data-analytics-integration"]
          },
          "example": ["foundation-ai-first-engineering", "intermediate-infrastructure-architect"]
        },
        "prerequisiteKatas": {
          "type": "array",
          "description": "List of prerequisite kata files that should be completed first",
          "items": {
            "type": "string",
            "pattern": "^[a-z0-9-]+/[0-9]+-[a-z0-9-]+\\.md$"
          },
          "example": ["ai-assisted-engineering/01-prompt-engineering-basics.md"]
        },
        "roleRelevance": {
          "type": "array",
          "description": "Primary roles this kata serves",
          "items": {
            "type": "string",
            "enum": ["edge-engineer", "solution-architect", "infrastructure-engineer", "project-manager", "developer", "data-engineer", "analytics-engineer"]
          },
          "example": ["edge-engineer", "developer"]
        },
        "targetAudience": {
          "type": "array",
          "description": "Specific audience this kata serves",
          "items": {
            "type": "string"
          },
          "example": ["Developers new to AI integration", "Edge computing practitioners"]
        },
        "learningObjectives": {
          "type": "array",
          "description": "Specific skills/knowledge gained from this kata",
          "items": {
            "type": "string"
          },
          "example": ["Understand AI prompt engineering fundamentals", "Apply prompt templates to real scenarios"]
        },
        "contentType": {
          "type": "string",
          "description": "Type of content delivery",
          "enum": ["hands-on", "scenario-based", "conceptual", "reference"],
          "example": "hands-on"
        },
        "realWorldApplication": {
          "type": "string",
          "description": "Brief description of how this applies in practice",
          "example": "Building production-ready AI applications with proper prompt engineering"
        },
        "complexityFactors": {
          "type": "array",
          "description": "What makes this kata challenging",
          "items": {
            "type": "string"
          },
          "example": ["Integration with multiple AI services", "Real-time processing requirements"]
        },
        "source": {
          "type": "string",
          "description": "Source of the progress update to prevent circular updates",
          "enum": ["ui", "coach", "file-watcher", "server", "import", "manual"],
          "example": "coach"
        },
        "fileType": {
          "type": "string",
          "const": "kata-progress",
          "description": "File type identifier for validation"
        },
        "sessionId": {
          "type": "string",
          "description": "Optional session identifier for multi-session tracking",
          "example": "session-20250709-164310"
        },
        "userId": {
          "type": "string",
          "description": "Optional user identifier for multi-user environments",
          "example": "user123"
        },
        "pageUrl": {
          "type": "string",
          "description": "URL of the kata page where progress was tracked",
          "example": "/learning/kata-progress-tracking.md"
        },
        "lastUpdated": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of when this progress file was last updated",
          "example": "2025-07-10T16:43:10.000Z"
        }
      }
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of when this progress was recorded",
      "example": "2025-07-09T16:43:10.000Z"
    },
    "progress": {
      "type": "object",
      "description": "Progress tracking data",
      "required": ["checkboxStates"],
      "properties": {
        "checkboxStates": {
          "type": "object",
          "description": "State of all checkboxes in the kata",
          "patternProperties": {
            "^[a-zA-Z0-9_-]+$": {
              "type": "boolean",
              "description": "Checkbox completion state (true = checked, false = unchecked)"
            }
          },
          "additionalProperties": false,
          "example": {
            "success-criteria-1": true,
            "validation-checkpoint-1": false,
            "phase-1-complete": true
          }
        },
        "completedTasks": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of completed tasks (derived from checkboxStates)",
          "example": 5
        },
        "totalTasks": {
          "type": "integer",
          "minimum": 0,
          "description": "Total number of tasks in the kata",
          "example": 12
        },
        "completionPercentage": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Completion percentage (derived from completed/total tasks)",
          "example": 41.67
        },
        "currentPhase": {
          "type": "string",
          "description": "Current phase of the kata being worked on",
          "example": "Phase 2: Implementation"
        },
        "validationCheckpoints": {
          "type": "object",
          "description": "Progress tracking for specific AI coaching validation points",
          "patternProperties": {
            "^checkpoint-[0-9]+$": {
              "type": "object",
              "properties": {
                "completed": {
                  "type": "boolean",
                  "description": "Whether this checkpoint has been reached"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time",
                  "description": "When this checkpoint was completed"
                },
                "evidence": {
                  "type": "string",
                  "description": "Evidence or description of checkpoint completion"
                }
              }
            }
          },
          "example": {
            "checkpoint-1": {
              "completed": true,
              "timestamp": "2025-07-09T16:30:00.000Z",
              "evidence": "Successfully created initial prompt template"
            }
          }
        },
        "extensionChallenges": {
          "type": "object",
          "description": "Progress on optional extension challenges",
          "patternProperties": {
            "^[a-zA-Z0-9_-]+$": {
              "type": "object",
              "properties": {
                "attempted": {
                  "type": "boolean",
                  "description": "Whether this extension was attempted"
                },
                "completed": {
                  "type": "boolean",
                  "description": "Whether this extension was completed"
                },
                "notes": {
                  "type": "string",
                  "description": "Notes about the extension attempt"
                }
              }
            }
          },
          "example": {
            "advanced-integration": {
              "attempted": true,
              "completed": false,
              "notes": "Started but need more time to complete properly"
            }
          }
        },
        "sections": {
          "type": "object",
          "description": "Progress tracking by kata sections",
          "patternProperties": {
            "^[a-zA-Z0-9_-]+$": {
              "type": "object",
              "properties": {
                "completed": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "Completed tasks in this section"
                },
                "total": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "Total tasks in this section"
                },
                "percentage": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100,
                  "description": "Section completion percentage"
                }
              }
            }
          },
          "example": {
            "phase-1": {
              "completed": 3,
              "total": 3,
              "percentage": 100
            },
            "phase-2": {
              "completed": 2,
              "total": 6,
              "percentage": 33.33
            }
          }
        },
        "currentStep": {
          "type": "string",
          "description": "Identifier of the current/next step to work on",
          "example": "phase-2-step-3"
        },
        "timeSpent": {
          "type": "integer",
          "minimum": 0,
          "description": "Time spent on kata in minutes",
          "example": 45
        },
        "difficulty": {
          "type": "string",
          "enum": ["beginner", "intermediate", "advanced", "expert"],
          "description": "Perceived difficulty level for this learner",
          "example": "intermediate"
        },
        "realWorldApplication": {
          "type": "string",
          "description": "Notes on how learner applied this to real-world scenarios",
          "example": "Applied prompt engineering to customer support chatbot"
        }
      }
    },
    "coaching": {
      "type": "object",
      "description": "Real-time coaching data for immediate AI coach interactions",
      "properties": {
        "aiCoachingEnabled": {
          "type": "boolean",
          "description": "Whether AI coaching is enabled for this kata",
          "example": true
        },
        "lastCoachInteraction": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of last coach interaction",
          "example": "2025-07-10T16:30:00.000Z"
        },
        "currentGuidance": {
          "type": "array",
          "description": "Current coach guidance for the learner",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": ["suggestion", "hint", "encouragement", "warning", "next-step"],
                "description": "Type of guidance"
              },
              "message": {
                "type": "string",
                "description": "Guidance message"
              },
              "priority": {
                "type": "string",
                "enum": ["low", "medium", "high"],
                "description": "Priority level of the guidance"
              }
            }
          },
          "example": [
            {
              "type": "encouragement",
              "message": "Great progress on Phase 1! You're understanding the concepts well.",
              "priority": "medium"
            }
          ]
        },
        "suggestions": {
          "type": "array",
          "description": "Current coach suggestions for the learner (legacy field)",
          "items": {
            "type": "string"
          },
          "example": ["Great progress on tasks 1 and 3!"]
        },
        "nextSteps": {
          "type": "array",
          "description": "Recommended next steps for the learner",
          "items": {
            "type": "string"
          },
          "example": ["Complete Phase 2 validation checkpoint", "Try the first extension challenge"]
        },
        "personalizedFeedback": {
          "type": "string",
          "description": "Personalized feedback based on learning pattern",
          "example": "Your systematic approach to problem-solving is excellent. Consider exploring the advanced integration challenge."
        },
        "learningStyle": {
          "type": "string",
          "enum": ["visual", "auditory", "kinesthetic", "reading"],
          "description": "Detected learning style preference"
        }
      }
    },
    "coachingData": {
      "type": "object",
      "description": "Data specific to coach interactions and guidance",
      "properties": {
        "lastCoachInteraction": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of last coach interaction",
          "example": "2025-07-09T16:30:00.000Z"
        },
        "coachingNotes": {
          "type": "array",
          "description": "Notes from coaching sessions",
          "items": {
            "type": "object",
            "properties": {
              "timestamp": {
                "type": "string",
                "format": "date-time"
              },
              "note": {
                "type": "string",
                "description": "Coach observation or guidance note"
              },
              "type": {
                "type": "string",
                "enum": ["observation", "guidance", "encouragement", "troubleshooting", "completion"],
                "description": "Type of coaching note"
              }
            }
          },
          "example": [
            {
              "timestamp": "2025-07-09T16:25:00.000Z",
              "note": "Learner showing strong understanding of prompt structure",
              "type": "observation"
            }
          ]
        },
        "stuckPoints": {
          "type": "array",
          "description": "Tasks where learner needed assistance",
          "items": {
            "type": "object",
            "properties": {
              "taskId": {
                "type": "string",
                "description": "Task identifier where assistance was needed"
              },
              "assistance": {
                "type": "string",
                "description": "Type of assistance provided"
              },
              "resolved": {
                "type": "boolean",
                "description": "Whether the issue was resolved"
              }
            }
          }
        },
        "progressPattern": {
          "type": "string",
          "enum": ["fast", "steady", "slow", "erratic"],
          "description": "Overall progress pattern observed",
          "example": "steady"
        },
        "nextRecommendation": {
          "type": "string",
          "description": "Coach recommendation for next steps",
          "example": "Focus on understanding error messages before moving to next task"
        }
      }
    },
    "learningAnalytics": {
      "type": "object",
      "description": "Analytics data for learning path optimization",
      "properties": {
        "skillsAssessed": {
          "type": "array",
          "description": "Skills that have been assessed through this kata",
          "items": {
            "type": "string"
          },
          "example": ["prompt-engineering", "debugging", "ai-assisted-development"]
        },
        "competencyLevel": {
          "type": "object",
          "description": "Assessed competency levels",
          "patternProperties": {
            "^[a-z-]+$": {
              "type": "string",
              "enum": ["novice", "developing", "proficient", "advanced"],
              "description": "Competency level for specific skill"
            }
          },
          "example": {
            "prompt-engineering": "proficient",
            "debugging": "developing"
          }
        },
        "learningObjectives": {
          "type": "array",
          "description": "Learning objectives and their completion status",
          "items": {
            "type": "object",
            "properties": {
              "objective": {
                "type": "string",
                "description": "Learning objective description"
              },
              "completed": {
                "type": "boolean",
                "description": "Whether objective has been achieved"
              },
              "evidence": {
                "type": "string",
                "description": "Evidence of objective completion"
              }
            }
          }
        }
      }
    },
    "environment": {
      "type": "object",
      "description": "Environment and context information",
      "properties": {
        "browser": {
          "type": "string",
          "description": "Browser information if available",
          "example": "Chrome 91.0"
        },
        "docsifyVersion": {
          "type": "string",
          "description": "Docsify version if using local docs",
          "example": "4.12.2"
        },
        "progressSystemVersion": {
          "type": "string",
          "description": "Version of progress tracking system",
          "example": "2.0.0"
        },
        "localServer": {
          "type": "boolean",
          "description": "Whether using local docs server",
          "example": true
        }
      }
    },
    "history": {
      "type": "array",
      "description": "History of progress updates for audit trail",
      "items": {
        "type": "object",
        "properties": {
          "timestamp": {
            "type": "string",
            "format": "date-time"
          },
          "source": {
            "type": "string",
            "enum": ["ui", "coach", "file-watcher", "server", "import", "manual"]
          },
          "action": {
            "type": "string",
            "enum": ["created", "updated", "checkpoint", "reset", "completed"]
          },
          "changes": {
            "type": "object",
            "description": "Summary of what changed"
          }
        }
      }
    }
  },
  "additionalProperties": false
}
